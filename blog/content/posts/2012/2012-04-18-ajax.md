+++
date = "2012-04-18T14:09:46+00:00"
draft = false
tags = ["ajax", "jqm", "jquery", "javascript"]
title = "ajaxで画像を読み込みまくるとハング"
+++
<p>ajaxで画像を新たにゴリゴリ読み込みまくっていた。</p>&#13;
<p>するとどうだろう。ロードに時間がかかりまくる。</p>&#13;
&#13;
<p>色々試していると、どうやらキャッシュされている画像のurlについても書き直している模様。</p>&#13;
&#13;
<p>例えば、対象画像のsrcだけをajax通信で書き換えると・・・</p>&#13;
<p>１回目：load処理１回</p>&#13;
<p>２回目：load処理２回</p>&#13;
<p>３回目：load処理３回</p>&#13;
<p>４回目：load処理４回</p>&#13;
<p>・・・</p>&#13;
&#13;
<p>と成長する。「恐ろしい子！」</p>&#13;
&#13;
<p>キャッシュされている画像urlに対しても書き換える。新たにキャッシュされて増える。そいつに対しても書き換える。</p>&#13;
<p><br />どうしたらいいだろうか？</p>&#13;
<p>多分この課題は明日以降へ持ち出しだ・・・</p> 