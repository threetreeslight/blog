+++
date = "2012-11-01T12:46:00+00:00"
draft = false
tags = ["AWS", "CentOS", "rails", "postgres"]
title = "[AWS][CentOS]postgres9.2入れる"
+++
<p>herokuをdev環境やstagingとして使う事出来るので、postgresを使う事にする。</p>&#13;
<p><strong>CentOSリポジトリの物は古いので、新しいのをとってきていれる</strong></p>&#13;
<pre>$ sudo rpm -ivh http://yum.postgresql.org/9.2/redhat/rhel-6-x86_64/pgdg-centos92-9.2-6.noarch.rpm&#13;
警告: /http://yum.postgresql.org/9.2/redhat/rhel-6-x86_64/pgdg-centos92-9.2-6.noarch.rpm: ヘッダ V4 DSA/SHA1 Signature, key ID 442df0f8: NOKEY&#13;
準備中...                ########################################### [100%]&#13;
   1:pgdg-centos92          ########################################### [100%]&#13;
&#13;
$ yum list | grep postgres&#13;
bacula-director-postgresql.x86_64    5.0.0-9.el6               base             &#13;
bacula-storage-postgresql.x86_64     5.0.0-9.el6               base             &#13;
check_postgres.noarch                2.19.0-1.rhel6            pgdg92           &#13;
freeradius-postgresql.x86_64         2.1.12-4.el6_3            updates          &#13;
postgresql.i686                      8.4.13-1.el6_3            updates          &#13;
postgresql.x86_64                    8.4.13-1.el6_3            updates          &#13;
postgresql-contrib.x86_64            8.4.13-1.el6_3            updates          &#13;
postgresql-devel.i686                8.4.13-1.el6_3            updates          &#13;
postgresql-devel.x86_64              8.4.13-1.el6_3            updates          &#13;
postgresql-docs.x86_64               8.4.13-1.el6_3            updates          &#13;
postgresql-jdbc.x86_64               8.4.701-3.el6             base             &#13;
postgresql-jdbc.noarch               8.4.701-8.el6             base             &#13;
postgresql-libs.i686                 8.4.13-1.el6_3            updates          &#13;
postgresql-libs.x86_64               8.4.13-1.el6_3            updates          &#13;
postgresql-odbc.x86_64               08.04.0200-1.el6          base             &#13;
postgresql-plperl.x86_64             8.4.13-1.el6_3            updates          &#13;
postgresql-plpython.x86_64           8.4.13-1.el6_3            updates          &#13;
postgresql-pltcl.x86_64              8.4.13-1.el6_3            updates          &#13;
postgresql-server.x86_64             8.4.13-1.el6_3            updates          &#13;
postgresql-test.x86_64               8.4.13-1.el6_3            updates          &#13;
postgresql92.x86_64                  9.2.1-1PGDG.rhel6         pgdg92           &#13;
postgresql92-contrib.x86_64          9.2.1-1PGDG.rhel6         pgdg92           &#13;
postgresql92-debuginfo.x86_64        9.2.1-1PGDG.rhel6         pgdg92           &#13;
postgresql92-devel.x86_64            9.2.1-1PGDG.rhel6         pgdg92           &#13;
postgresql92-docs.x86_64             9.2.1-1PGDG.rhel6         pgdg92           &#13;
postgresql92-jdbc.x86_64             9.2.1000-1PGDG.rhel6      pgdg92           &#13;
postgresql92-jdbc-debuginfo.x86_64   9.2.1000-1PGDG.rhel6      pgdg92           &#13;
postgresql92-libs.x86_64             9.2.1-1PGDG.rhel6         pgdg92           &#13;
postgresql92-odbc.x86_64             09.01.0200-1PGDG.rhel6    pgdg92           &#13;
postgresql92-odbc-debuginfo.x86_64   09.01.0200-1PGDG.rhel6    pgdg92           &#13;
postgresql92-plperl.x86_64           9.2.1-1PGDG.rhel6         pgdg92           &#13;
postgresql92-plpython.x86_64         9.2.1-1PGDG.rhel6         pgdg92           &#13;
postgresql92-pltcl.x86_64            9.2.1-1PGDG.rhel6         pgdg92           &#13;
postgresql92-server.x86_64           9.2.1-1PGDG.rhel6         pgdg92           &#13;
postgresql92-tcl.x86_64              2.0.0-1.rhel6             pgdg92           &#13;
postgresql92-tcl-debuginfo.x86_64    2.0.0-1.rhel6             pgdg92           &#13;
postgresql92-test.x86_64             9.2.1-1PGDG.rhel6         pgdg92           &#13;
qt-postgresql.i686                   1:4.6.2-24.el6            base             &#13;
qt-postgresql.x86_64                 1:4.6.2-24.el6            base    &#13;
&#13;
&#13;
$ yum info postgresql92-server&#13;
Loaded plugins: fastestmirror, security&#13;
Loading mirror speeds from cached hostfile&#13;
 * base: mirror.usonyx.net&#13;
 * extras: mirror.usonyx.net&#13;
 * updates: mirror.usonyx.net&#13;
Available Packages&#13;
Name        : postgresql92-server&#13;
Arch        : x86_64&#13;
Version     : 9.2.1&#13;
Release     : 1PGDG.rhel6&#13;
Size        : 3.7 M&#13;
Repo        : pgdg92&#13;
Summary     : The programs needed to create and run a PostgreSQL server&#13;
URL         : http://www.postgresql.org/&#13;
License     : PostgreSQL&#13;
Description : The postgresql92-server package includes the programs needed to create&#13;
            : and run a PostgreSQL server, which will in turn allow you to create&#13;
            : and maintain PostgreSQL databases.  PostgreSQL is an advanced&#13;
            : Object-Relational database management system (DBMS) that supports&#13;
            : almost all SQL constructs (including transactions, subselects and&#13;
            : user-defined types and functions). You should install&#13;
            : postgresql92-server if you want to create and maintain your own&#13;
            : PostgreSQL databases and/or your own PostgreSQL server. You also need&#13;
            : to install the postgresql package.&#13;
&#13;
&#13;
$ sudo yum install postgresql92-server&#13;
</pre>&#13;
<p><strong>確認</strong></p>&#13;
<pre>$ rpm -qa | grep postgres&#13;
postgresql92-server-9.2.1-1PGDG.rhel6.x86_64&#13;
postgresql92-9.2.1-1PGDG.rhel6.x86_64&#13;
postgresql92-libs-9.2.1-1PGDG.rhel6.x86_64&#13;
&#13;
$ psql --version&#13;
psql (PostgreSQL) 9.2.1&#13;
</pre>&#13;
<p><br /><strong>サービスの立ち上げ</strong></p>&#13;
<pre>$ sudo service postgresql-9.2 initdb &#13;
Initializing database:                                     [  OK  ]　&#13;
$ sudo service postgresql-9.2 start&#13;
Starting postgresql-9.2 service:                           [  OK  ]&#13;
&#13;
$ sudo su postgres&#13;
bash-4.1$ psql -l&#13;
could not change directory to "/home/webadmin"&#13;
                             List of databases&#13;
   Name    |  Owner   | Encoding  | Collate | Ctype |   Access privileges   &#13;
-----------+----------+-----------+---------+-------+-----------------------&#13;
 postgres  | postgres | SQL_ASCII | C       | C     | &#13;
 template0 | postgres | SQL_ASCII | C       | C     | =c/postgres          +&#13;
           |          |           |         |       | postgres=CTc/postgres&#13;
 template1 | postgres | SQL_ASCII | C       | C     | =c/postgres          +&#13;
           |          |           |         |       | postgres=CTc/postgres&#13;
&#13;
</pre>&#13;
<p>参考<br />http://people.planetpostgresql.org/devrim/index.php?/archives/48-What-is-new-in-PostgreSQL-9.0-RPMs.html</p> 